{{define "posts"}}
<!DOCTYPE html>
<html lang="en">
  <head>
    {{template "head" dict "Site" .Site "IsPost" false}}
  </head>
  <body class="container">
    <main>
      <div class="navbar">{{template "navbar" .}}</div>
      <hr class="divider" />
      <h1 class="posts-title">ALL POSTS ({{len .Posts}})</h1>
      <div class="post-list">
        {{range $i, $post := .Posts}}
          <article class="post">
            <div class="post-date">{{.Meta.Date | day}}</div>
            <div class="post-index">
              <div class="post-index-title">
                <a href="/posts/{{.Uname | urlize}}.html">{{.Meta.Title}}</a>
                <div class="language-indicator">
                  <span class="lang {{if contains .Meta.Languages "en"}}lang-active{{end}}">en</span>/<span class="lang {{if contains .Meta.Languages "cn"}}lang-active{{end}}">cn</span>
                </div>
              </div>
              <div class="post-meta">
                <nav class="post-tags">
                  {{range $tag := .Meta.Tags}}
                  <a href="/tags/{{$tag | urlize}}.html" class="tag">#{{$tag}}</a>
                  {{end}}
                </nav>
              </div>
            </div>
          </article>
          {{if ne (add $i 1) (len $.Posts)}}
            <hr class="divider-short">
          {{end}}
        {{end}}
      </div>
      <hr class="divider" />
    </main>
  </body>
</html>
{{end}}