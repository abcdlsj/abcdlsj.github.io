{{define "posts"}}
<!DOCTYPE html>
<html lang="en">
  <head>
    {{template "head" dict "Site" .Site "IsPost" false}}
  </head>
  <body>
    <div class="app">
      {{template "navbar" .}}
      <main class="surface list-shell">
        <div class="section-header">
          <h1 class="section-title">All Posts Â· {{len .Posts}}</h1>
          <p class="section-hint">Sorted by publish date in descending order.</p>
        </div>
        <div class="article-list">
          {{range .Posts}}
          <article class="post-card">
            <div class="post-card__meta">
              <time datetime="{{.Meta.Date}}">{{.Meta.Date | day}}</time>
              <span class="language-pill">
                {{if contains .Meta.Languages "cn"}}CN{{else}}EN{{end}}
              </span>
            </div>
            <h2 class="post-card__title">
              <a href="/posts/{{.Uname | urlize}}.html">{{.Meta.Title}}</a>
            </h2>
            {{if .Meta.Description}}
            <p class="post-card__excerpt">{{.Meta.Description}}</p>
            {{end}}
            {{if .Meta.Tags}}
            <div class="post-card__tags">
              {{range $tag := .Meta.Tags}}
              <a href="/tags/{{$tag | urlize}}.html" class="tag-chip">#{{$tag}}</a>
              {{end}}
            </div>
            {{end}}
          </article>
          {{end}}
        </div>
      </main>
      {{template "footer" .}}
    </div>
  </body>
</html>
{{end}}