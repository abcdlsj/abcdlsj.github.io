
<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8" />
<title>Golink - Useful local url shortener</title>
<meta name="description" content="Exploring the intersections of life/programming/technology." />

<meta name="keywords" content="Shortener,Template,">
<meta name="author" content="abcdlsj">
<meta property="og:title" content="Golink - Useful local url shortener">
<meta property="og:description" content="Create your personal local URL shortening service: From /etc/hosts to a complete short link system, sharing how to build a lightweight and customizable URL shortener tool.">
<meta property="og:url" content="https://abcdlsj.github.io/posts/golink-useful-local-url-shortener.html">
<meta property="og:type" content="article">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
<link rel="shortcut icon" href="/static/favicon.ico" />
<link rel="stylesheet" href="/static/style.css" />
<script>
  // Theme initialization - runs before page render to prevent flash
  (function() {
    const theme = localStorage.getItem('theme');
    if (theme) {
      document.documentElement.setAttribute('data-theme', theme);
    }
  })();
</script>
<script defer src="https://us.umami.is/script.js" data-website-id="5af61252-79b1-48a0-a452-fdeefbf6a3ee"></script>
<script src="/static/script/search.js"></script>

  </head>
  <body>
    <div class="app">
      
<header class="site-header">
  <div class="site-header__inner">
    <div class="site-header__brand">
      <a href="/" class="site-header__title">Golink - Useful local url shortener</a>
      <span class="site-header__tagline">Exploring the intersections of life/programming/technology.</span>
    </div>
    <nav class="site-header__nav">
      <ul class="nav-links">
        
        
        <li>
          <a href="/" class="nav-link">Home</a>
        </li>
        
        
        
        <li>
          <a href="/posts" class="nav-link">Posts</a>
        </li>
        
        
        
        <li>
          <a href="/about" class="nav-link">About</a>
        </li>
        
        
        
        
        
        <li>
          <a href="/rss.xml" class="nav-link">Feed</a>
        </li>
        
        
      </ul>
      <button class="theme-toggle" type="button" aria-label="Toggle theme" onclick="toggleTheme()">
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>
    </nav>
  </div>
</header>
<script>
  function toggleTheme() {
    const html = document.documentElement;
    const currentTheme = html.getAttribute('data-theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    let newTheme;
    if (currentTheme === 'dark') {
      newTheme = 'light';
    } else if (currentTheme === 'light') {
      newTheme = 'dark';
    } else {
      // No explicit theme set, toggle based on system preference
      newTheme = prefersDark ? 'light' : 'dark';
    }
    
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  }
</script>

      <main class="container">
        <div class="post-layout ">
          <article class="post-article">
            <!-- Post Header -->
            <header class="post-header">
              
              <h1 class="post-title">Golink - Useful local url shortener</h1>
              <div class="post-meta">
                <time class="post-date" datetime="2023-04-16T22:47:37+08:00">2023-04-16</time>
                
                <div class="post-tags">
                  
                  <a href="/tags/shortener.html" class="tag">#Shortener</a>
                  
                  <a href="/tags/template.html" class="tag">#Template</a>
                  
                </div>
                
              </div>
            </header>

            

            <!-- Post Content -->
            <div class="post-body">
              <blockquote>
<p>What is <code>url shortener</code>?<br>
Get the Answer: <a href="https://en.wikipedia.org/wiki/URL_shortening">URL Shortening</a></p>
</blockquote>
<!--more-->
<p>There are many posts about <code>url shorteners</code> on the internet, but I wanted to write this post to record my own thoughts.</p>
<p>For a good <code>url shortener</code>, it should have a short domain (e.g., <code>t.ly</code>, <code>bit.ly</code>).</p>
<p>Short domains can be quite expensive.</p>
<p>An alternative is to use a <code>DNS server</code> to map a short domain to a long domain.</p>
<p>However, in most cases, this is not necessary for me.</p>
<p>I just want to create a url shortener in my local network, so I am interested in using a local <code>url shortener</code>.</p>
<h2 id="etchosts">/etc/hosts</h2>
<blockquote>
<p><code>/etc/hosts</code> is a file in Linux that can link a domain to an IP address.</p>
</blockquote>
<p>For example, I can add the following line to <code>/etc/hosts</code>:</p>
<pre><code>127.0.0.1      go
</code></pre>
<p>This allows me to access <code>go</code> in my browser.</p>
<p>When I enter <code>go</code> in my browser, it sends a request to <code>127.0.0.1:80</code> (you cannot specify a port in <code>/etc/hosts</code> because it works like a <code>DNS server</code> and can only link a domain to an IP address).</p>
<h2 id="code">Code</h2>
<p>Writing a url shortener is quite simple: just create an HTTP server that maps a domain to a URL.</p>
<p>You can write one yourself or take a look at my <a href="https://github.com/abcdlsj/share/tree/master/go/golink">abcdlsj/golink</a> implementation (Use <code>SQLite3</code>, With <code>import/export</code> features).</p>
<h2 id="run-it">Run it</h2>
<p>Run it as a daemon:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>nohup golink &amp;
</span></span></code></pre><h2 id="view">View</h2>
<img alt="golink screenshot" src="/static/img/golink-screenshot.png" width="100%" style="border: 1px solid gray;">
<p>You also can add a <code>Chrome Site-search</code> to make it easier to use.</p>
<img alt="Chrome Site-search setting" src="/static/img/golink-chrome-site-search.png" width="100%" style="border: 1px solid gray;">
<h2 id="end">End</h2>
<p>This post doesn't include any code samples, as I believe that you can write it yourself for the purpose of learning or practicing a programming language.</p>
<p>The idea is from <a href="https://github.com/tailscale/golink/tree/main">tailscale/golink</a>, which relies on <code>Tailscale Magic DNS</code>. You can find more information <a href="https://tailscale.com/kb/1081/magicdns/">here</a></p>

            </div>
          </article>

          
        </div>

        <!-- Comments -->
        <section class="comments-section">
          <div id="disqus_thread"></div>
        </section>
      </main>
      
<footer class="footer">
  <div class="footer__inner">
    <p>Â© 2024 <a href="https://github.com/abcdlsj">abcdlsj</a></p>
    <p><a href="https://github.com/abcdlsj/abcdlsj.github.io">Source</a></p>
  </div>
</footer>

    </div>

    <button class="back-to-top" type="button" aria-label="Back to top" onclick="scrollToTop()">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 15 12 9 6 15"></polyline>
      </svg>
    </button>

    <script>
      function scrollToTop() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      const backToTop = document.querySelector(".back-to-top");
      const toggleButton = () => {
        if (!backToTop) return;
        backToTop.classList.toggle("back-to-top--visible", window.scrollY > 400);
      };
      window.addEventListener("scroll", toggleButton);

      // Smooth scroll for TOC links
      document.addEventListener('DOMContentLoaded', function() {
        const tocLinks = document.querySelectorAll('.toc-nav a');
        tocLinks.forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
              targetElement.scrollIntoView({ behavior: 'smooth' });
            }
          });
        });

        // TOC scroll tracking
        const tocNav = document.querySelector('.toc-nav');
        if (tocNav) {
          const headings = document.querySelectorAll('.post-body h2, .post-body h3');
          const tocLinks = Array.from(tocNav.querySelectorAll('a'));
          
          function updateActiveHeading() {
            let activeId = '';
            
            // Find the heading currently in view
            for (let i = 0; i < headings.length; i++) {
              const rect = headings[i].getBoundingClientRect();
              if (rect.top <= 150) {  // 150px from top
                activeId = headings[i].id;
              }
            }
            
            // Update TOC active state
            tocLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === '#' + activeId) {
                link.classList.add('active');
              }
            });
          }
          
          // Throttle scroll events for performance
          let ticking = false;
          window.addEventListener('scroll', function() {
            if (!ticking) {
              requestAnimationFrame(function() {
                updateActiveHeading();
                ticking = false;
              });
              ticking = true;
            }
          });
          
          // Initial call
          updateActiveHeading();
        }
      });

      // Disqus
      (function() {
        var d = document, s = d.createElement("script");
        s.src = "https://abcdlsj.disqus.com/embed.js";
        s.setAttribute("data-timestamp", +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
  </body>
</html>
